---
layout: layouts/base.njk
pagination:
  data: collections.categoryList
  size: 1
  alias: category
permalink: "/categories/{{ category.key }}/"
eleventyComputed:
  title: "{{ category.name }}"
  description: "{{ category.name }} 카테고리 글 모음"
---
<section class="page-hero">
  <h1>{{ category.name }}</h1>
  <p class="muted">{{ category.name }} 카테고리에 속한 글</p>
  <div class="hero-actions">
    <a class="text-link" href="{{ '/blog/' | url }}">← 전체 글</a>
  </div>
</section>

{% set categoryPosts = collections.posts | postsByCategory(category) %}
{% set categoryCards = cards | cardsByCategory(category) %}

<section class="layout-two archive">
  <div class="feed">
    <div class="post-list">
      {% if categoryPosts.length > 0 %}
        {% for post in categoryPosts %}
          <article class="post-item">
            <a href="{{ post.url | url }}">
              <div class="post-thumb">
                <div class="post-thumb-placeholder"></div>
              </div>
              <div class="post-info">
                <span class="post-category">{{ post.data.category | default('notes') }}</span>
                <h2 class="post-title">{{ post.data.title }}</h2>
                <p class="post-excerpt">{{ post.data.excerpt or post.data.description }}</p>
                <span class="post-date">{{ post.date | readableDate }}</span>
              </div>
            </a>
          </article>
        {% endfor %}
      {% else %}
        <p class="muted">아직 이 카테고리에 작성된 글이 없습니다.</p>
      {% endif %}
    </div>
  </div>
  <aside class="sidebar">
    <div class="sidebar-card">
      <div class="card-title">카테고리</div>
      <ul class="category-list">
        {% for cat in collections.categoryList %}
          <li{% if cat.key == category.key %} class="active"{% endif %}>
            <a href="{{ ('/categories/' + cat.key + '/') | url }}">{{ cat.name }}</a>
            <span class="count">({{ collections.byCategory[cat.key] | length }})</span>
          </li>
        {% endfor %}
      </ul>
    </div>
    <div>
      <div class="sidebar-title">태그</div>
      <div class="tag-cloud">
        {% for tagItem in collections.tagList %}
          <a class="tag" href="{{ ('/tags/' + tagItem.slug + '/') | url }}">{{ tagItem.name }}</a>
        {% endfor %}
      </div>
    </div>
  </aside>
</section>

{% if categoryCards.length > 0 %}
<section class="related-cards">
  <div class="section-header">
    <h2>관련 카드</h2>
    <p>Playground, 프로젝트, 외주 카드 모음</p>
  </div>
  <div class="project-grid">
    {% for card in categoryCards %}
      <article class="project-card card-link-wrap">
        {% if card.slug %}
          <a class="card-link" href="{{ ('/cards/' + card.slug + '/') | url }}" aria-label="{{ card.title }} 프리뷰 보기"></a>
        {% endif %}
        <div class="project-meta">
          <span class="badge">{{ card.typeLabel }}</span>
          {% if card.status %}<span class="pill">{{ card.status }}</span>{% endif %}
        </div>
        <h3>{{ card.title }}</h3>
        <p class="muted">{{ card.description }}</p>
        {% if card.tags.length %}
        <div class="tag-row">
          {% for tagItem in card.tags %}
            <a class="tag" href="{{ ('/tags/' + (tagItem | slugify) + '/') | url }}">{{ tagItem }}</a>
          {% endfor %}
        </div>
        {% endif %}
      </article>
    {% endfor %}
  </div>
</section>
{% endif %}
